document.addEventListener('DOMContentLoaded', () => {
    const pokemonContainer = document.getElementById('pokemon-container');
    const popup = document.getElementById('popup');
    const popupText = document.getElementById('popup-text');
    const popupYes = document.getElementById('popup-yes');
    const popupNo = document.getElementById('popup-no');

    if (pokemonContainer) {
        genereerStarterPokemon(pokemonContainer, popup, popupText, popupYes, popupNo);
    } else {
        console.error("De container 'pokemon-container' bestaat niet in de DOM.");
    }
});

async function genereerStarterPokemon(container, popup, popupText, popupYes, popupNo) {
    const starterIds = [1, 4, 7];
    for (const id of starterIds) {
        const pokemon = await haalPokemonGegevensOp(id);
        if (pokemon) {
            const div = document.createElement('div');
            div.className = 'starter-pokemon';
            div.innerHTML = `
                <img src="${pokemon.sprites.front_default}" alt="${pokemon.name}" style="width: 100px; height: 100px;">
                <p><strong>${pokemon.name}</strong></p>
            `;
            div.onclick = () => {
                console.log(`Je hebt op ${pokemon.name} geklikt!`); // Test log
                popup.classList.add('show'); // Maak de pop-up zichtbaar
                popupText.textContent = `Wilt u ${pokemon.name} als uw starter Pokémon kiezen?`;
            
                popupYes.onclick = () => {
                    popup.classList.remove('show'); // Verberg de pop-up
                    document.getElementById('niet-ingelogged').style.display = 'none';
                    document.getElementById('well-ingelogged').style.display = 'block';
                };
            
                popupNo.onclick = () => {
                    popup.classList.remove('show'); // Verberg de pop-up
                };
            };
            
            container.appendChild(div);
        }
    }
}

async function haalPokemonGegevensOp(query) {
    try {
        const antwoord = await fetch(`https://pokeapi.co/api/v2/pokemon/${query}`);
        if (antwoord.ok) {
            const pokemon = await antwoord.json();
            return pokemon;
        } else {
            console.error(`Kon de Pokémon niet ophalen met ID: ${query}.`);
            return null;
        }
    } catch (fout) {
        console.error(`Fout bij het ophalen van Pokémon-gegevens:`, fout);
        return null;
    }
}
